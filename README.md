# 简介
本项目是七牛[自定义数据处理](http://developer.qiniu.com/article/dora/ufop/ufop-introduction.html)的示例程序。这个项目使用Java语言编写，可以作为接入七牛自定义数据处理的参考。
这个项目主要是实现一个计算文件md5的功能，其中的框架代码完全可以在开发其他的自定义数据处理的时候使用，只需要实现一个简单的接口，并注册服务即可。


# 背景

七牛的自定义数据处理的威力十分强大，几乎可以做任何你想做的事情。传统意义上来说，我们要对一个文件进行处理，基本流程如下：

1. 应用程序从磁盘读取文件到内存
2. 应用程序对内存中的数据进行处理
3. 应用程序将处理的结果再次存入磁盘

而在云计算的时代，这个模型其实也适用，只不过各个角色变得大了一点。比如传统意义上的数据存储位置磁盘变成了云存储，而跑在系统上面的应用程序，现在变成了跑在docker里面的应用程序，变成了容器就是应用，应用就是容器。而传统意义上的应用程序和磁盘进行交互所需要的IO总线变成了内网的光纤。想一想就知道，其实不过是每个关键组成部分变得高大上了一点，有时候内网带宽的数据传输速度会把IO总线的速度虐成渣渣，所以坐拥存储而不去搞计算才是无法理解的。

用户自定义数据处理的出现适应了不同客户的需求。七牛官方提供的图片处理，音视频处理等功能只适合大部分的应用场景，还有很多客户特有的场景，比如数据加密存储，文件内容识别，音视频文件特殊方式转码，以及本例子中的获取小文件的md5值都是七牛官方所没有的，那么这种情况下，为了满足客户的需求，就必须搭建一套平台来开放应用的开发接口给客户，让客户自行实现自己所需要的功能，另外为了适应不同的规模的计算，弹性扩容也是自定义数据处理服务的一大特色，无论是实例的数量还是宿主机的硬件配置都是可以根据客户需要进行动态调整的。

# 框架

UFOP 的基本接口其实就是监听本地地址 `0.0.0.0`  的 `9100` 端口，并在路径 `/uop` 上面接受 HTTP POST 请求的HTTP服务器。然后对请求来的格式为 `application/json` 的 POST BODY 进行解析，获取其中的原始文件和处理指令相关的信息，接下来应用程序下载原始文件，保存在内存或者是系统的临时目录，对文件进行处理，最后把处理的结果写入到 HTTP RESPONSE 中。 最后一定记住要删除保存在本地的临时文件。

UFOP 服务接受的请求格式是固定的 JSON 格式。各个参数的意思可以参考文档的描述。



# 部署

# 依赖

[commons-codec](http://commons.apache.org/proper/commons-codec/)

# 支持
如果